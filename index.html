<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>who - A Narrative Puzzle Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* Define local fonts */
        @font-face {
            font-family: 'Alcotton';
            src: url('alcotton.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'Heavitas';
            src: url('Heavitas.ttf') format('truetype');
            font-weight: normal; /* Assuming regular weight for Heavitas */
            font-style: normal;
        }

        /* Custom base styles */
        body {
            background-color: #0a0a0a; /* Very dark grey, almost black */
            color: #e0e0e0; /* Light grey for text */
            font-family: 'Inter', sans-serif; /* Default fallback font */
            overflow-x: hidden; /* Prevent horizontal scroll */
            margin: 0; /* Ensure no default margin */
        }

        /* Font families */
        .font-monologue {
            font-family: 'Alcotton', 'Courier Prime', monospace; /* Alcotton first, Courier as fallback */
        }
        .font-title {
            font-family: 'Heavitas', 'Oswald', sans-serif; /* Heavitas first, Oswald as fallback */
            letter-spacing: 0.05em;
        }
        .font-heading { /* General heading class using Heavitas */
            font-family: 'Heavitas', 'Oswald', sans-serif;
        }

        /* General section styling */
        .section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            opacity: 0; /* Initially hidden for fade-in controlled by JS */
            transition: opacity 1.5s ease-in-out;
            position: relative;
            overflow: hidden; /* Prevents content spill from animations */
        }
        .section.visible {
            opacity: 1;
        }

        /* Monologue specific styling */
        #monologue-section {
            background-color: #000000; /* Pure black for initial impact */
            color: #f0f0f0; /* Slightly brighter white for monologue text */
        }
        .monologue-line {
            opacity: 0;
            transition: opacity 1s ease-in-out;
            margin-bottom: 1em; /* Adjusted for Alcotton if it's larger */
            font-size: clamp(1.5rem, 4vw, 2rem); /* Slightly adjusted for Alcotton */
            line-height: 1.4; /* Ensure readability with Alcotton */
        }
        .monologue-line.visible {
            opacity: 1;
        }
        .game-title {
            opacity: 0;
            transition: opacity 2s ease-in-out 0.5s; /* Delay after monologue lines finish */
            font-size: clamp(3rem, 10vw, 5.5rem); /* Made title potentially larger with Heavitas */
            color: #ffffff;
        }
        .game-title.visible {
            opacity: 1;
        }

        /* Scroll indicator styling */
        .scroll-indicator {
            position: absolute;
            bottom: 3rem;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0; /* Hidden initially */
            transition: opacity 1s ease-in-out;
            color: #777; /* Muted color */
            font-size: 1.5rem;
        }
        .scroll-indicator.visible {
            opacity: 0.6;
            animation: pulseArrow 2s infinite ease-in-out;
        }
        .scroll-indicator.hidden {
            display: none;
        }

        @keyframes pulseArrow {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(5px); }
        }
        
        /* Image showcase styling */
        .img-showcase {
            width: 100%;
            height: 100vh; /* Make showcase areas full viewport height */
            display: flex; 
            justify-content: center; 
            align-items: center; 
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
            position: relative; 
        }
        .img-showcase-inner { 
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .img-showcase-inner img, .img-showcase img {
            max-width: 90%; 
            max-height: 85vh; 
            object-fit: contain;
            border-radius: 0.375rem; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.6); 
        }
        
        #chair-section .img-showcase-inner img {
            box-shadow: 0 0 50px rgba(50,50,50,0.3); 
        }

        .text-overlay {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0,0,0,0.7);
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: #d1d5db; 
            max-width: 90%;
            font-family: 'Heavitas', 'Inter', sans-serif; /* Use Heavitas for overlays if desired */
        }
        .section-subtitle { 
            color: #9ca3af; 
            font-size: clamp(1rem, 2vw, 1.25rem); /* Slightly larger for Heavitas */
            margin-top: 1.5rem; /* More space for subtitle */
            max-width: 700px; 
            margin-left: auto;
            margin-right: auto;
            font-family: 'Heavitas', 'Inter', sans-serif; /* Use Heavitas for subtitles */
            line-height: 1.5;
        }

        #distorted-reality-section .img-showcase-inner img {
            transition: transform 10s cubic-bezier(0.25, 0.1, 0.25, 1) 0.5s; 
            transform: scale(1);
        }
        #distorted-reality-section.visible .img-showcase-inner img {
            transform: scale(1.03); 
        }

        .download-button {
            display: inline-block;
            padding: 1rem 3rem; /* Larger padding */
            border: 2px solid #34d399; 
            color: #34d399;
            text-decoration: none;
            font-family: 'Heavitas', sans-serif; /* Use Heavitas for button */
            font-weight: normal; /* Heavitas might be bold by default */
            font-size: 1.1rem; /* Adjust size if needed */
            border-radius: 0.375rem;
            transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            margin-top: 2.5rem;
            box-shadow: 0 0 15px rgba(52, 211, 153, 0.3); 
        }
        .download-button:hover {
            background-color: #34d399;
            color: #0a0a0a; 
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(52, 211, 153, 0.5); 
        }

        .js-fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .js-fade-in-up.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .glimpse-item {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease-out, transform 1s ease-out;
            width: 100%; 
        }
         .glimpse-item.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .glimpse-title {
            font-size: clamp(1.75rem, 5vw, 2.75rem); /* Larger titles with Heavitas */
            margin-bottom: 1.5rem;
            color: #e5e7eb; 
            font-family: 'Heavitas', 'Oswald', sans-serif; /* Ensure Heavitas is used */
        }
        .final-question {
            font-family: 'Alcotton', 'Courier Prime', monospace;
            font-size: clamp(1.75rem, 4vw, 2.25rem); /* Using Alcotton for final questions */
        }
        .final-statement {
            font-family: 'Alcotton', 'Courier Prime', monospace;
            font-size: clamp(1.5rem, 3.5vw, 2rem); /* Using Alcotton for final statements */
        }

    </style>
</head>
<body class="antialiased">

    <section id="monologue-section" class="section fixed inset-0 z-50">
        <div class="text-center leading-relaxed px-4">
            <p class="monologue-line font-monologue">i was sitting on my chair,</p>
            <p class="monologue-line font-monologue">i was thinking about those meaning i didn't even understand,</p>
            <p class="monologue-line font-monologue">but then, i realised,</p>
            <p class="monologue-line font-monologue">why was i here ?,</p>
            <p class="monologue-line font-monologue">what was i doing in this chair ?,</p>
            <p class="monologue-line font-monologue">it wasn't even my chair ?,</p>
            <p class="monologue-line font-monologue">so i stood up</p>
        </div>
        <h1 class="game-title font-title mt-10 md:mt-16">who</h1>
        <div class="scroll-indicator">
            <span>&#x2193;</span> </div>
    </section>

    <div style="height: 100vh;" aria-hidden="true"></div>

    <section id="chair-section" class="section">
        <div class="img-showcase">
             <div class="img-showcase-inner">
                <img src="test_chapter10003.jpg" 
                     alt="A lone chair in a dark void, illuminated by a spotlight."
                     onerror="this.onerror=null;this.src='https://placehold.co/1280x720/000000/FFFFFF?text=Image+Not+Found+-+test_chapter10003.jpg';">
            </div>
        </div>
        <p class="text-overlay italic">A narrative puzzle. A question of presence.</p>
    </section>

    <section id="glimpses-section" class="section">
        <div class="w-full max-w-5xl mx-auto space-y-24 md:space-y-32">
            
            <div class="glimpse-item">
                <h2 class="glimpse-title">The Way Out?</h2>
                <div class="img-showcase" style="background-image: url('bckground0004.jpg'); height: 70vh;"
                     onerror="this.style.backgroundImage='url(https://placehold.co/1920x1080/1a1a1a/FFFFFF?text=Image+Not+Found+-+bckground0004.jpg)'">
                </div>
                <p class="section-subtitle">A dim light, a closed door, an exit sign promising escape... or something else.</p>
            </div>

            <div class="glimpse-item">
                <h2 class="glimpse-title">Empty Spaces</h2>
                 <div class="img-showcase" style="background-image: url('test_chapter10001.jpg'); height: 70vh;"
                      onerror="this.style.backgroundImage='url(https://placehold.co/1920x1080/2a2a2a/FFFFFF?text=Image+Not+Found+-+test_chapter10001.jpg)'"></div>
                <p class="section-subtitle">Dusty shelves, forgotten objects. Traces of a life, or a construct?</p>
            </div>

            <div class="glimpse-item">
                <h2 class="glimpse-title">The Threshold</h2>
                <div class="img-showcase" style="background-image: url('test_chapter10000.jpg'); height: 70vh;"
                     onerror="this.style.backgroundImage='url(https://placehold.co/1920x1080/0f0f0f/FFFFFF?text=Image+Not+Found+-+test_chapter10000.jpg)'"></div>
                <p class="section-subtitle">A single door, stark against the wall. An invitation or a warning?</p>
            </div>
        </div>
    </section>

    <section id="distorted-reality-section" class="section">
        <div class="img-showcase">
            <div class="img-showcase-inner">
                <img src="test_chapter10002.jpg" 
                     alt="A surreal room with many windows at odd angles."
                     onerror="this.onerror=null;this.src='https://placehold.co/1920x1080/000000/FFFFFF?text=Image+Not+Found+-+test_chapter10002.jpg';">
            </div>
        </div>
        <p class="text-overlay italic">Familiar spaces. Unsettling truths. What is real?</p>
    </section>

    <section id="invitation-section" class="section bg-black"> 
        <div class="max-w-xl mx-auto px-4">
            <p class="final-question mb-6 js-fade-in-up">Why are you here?</p>
            <p class="final-statement mb-10 js-fade-in-up" style="transition-delay: 1s;">Perhaps it's time to find out.</p>
            <a href="https://github.com/kane8kki/whohl2mod/archive/refs/heads/main.zip"
               class="download-button js-fade-in-up"
               style="transition-delay: 2s;"
               target="_blank" rel="noopener noreferrer">
                Download 'who'
            </a>
        </div>
    </section>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const monologueSection = document.getElementById('monologue-section');
        const monologueLines = monologueSection.querySelectorAll('.monologue-line');
        const gameTitle = monologueSection.querySelector('.game-title');
        const scrollIndicator = monologueSection.querySelector('.scroll-indicator');
        let currentLine = 0;
        let monologueFinished = false;
        let initialScrollHandled = false;

        // Animate monologue lines
        function showNextLine() {
            if (currentLine < monologueLines.length) {
                monologueLines[currentLine].classList.add('visible');
                currentLine++;
                setTimeout(showNextLine, 1200); // Time between lines
            } else {
                gameTitle.classList.add('visible');
                monologueFinished = true;
                setTimeout(() => {
                    if (scrollIndicator) scrollIndicator.classList.add('visible');
                }, 1500); 
            }
        }

        setTimeout(showNextLine, 700);

        function handleInitialScroll() {
            if (window.scrollY > window.innerHeight * 0.5 && !initialScrollHandled) { 
                monologueSection.style.opacity = '0';
                monologueSection.style.pointerEvents = 'none'; 
                if (scrollIndicator) scrollIndicator.classList.add('hidden');
                initialScrollHandled = true; 

                sectionsToObserve.forEach(section => observer.observe(section));
                glimpseItems.forEach(item => observer.observe(item)); 
                invitationTextElements.forEach(el => observer.observe(el)); 

                window.removeEventListener('scroll', handleInitialScroll); 
            }
        }
        window.addEventListener('scroll', handleInitialScroll);

        const sectionsToObserve = Array.from(document.querySelectorAll('.section:not(#monologue-section)'));
        const glimpseItems = Array.from(document.querySelectorAll('.glimpse-item'));
        const invitationTextElements = Array.from(document.querySelectorAll('#invitation-section .js-fade-in-up'));

        const observerOptions = {
            root: null, 
            threshold: 0.25, 
            rootMargin: "0px 0px -50px 0px" 
        };

        const observer = new IntersectionObserver((entries, observerInstance) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);
    });
    </script>

</body>
</html>
